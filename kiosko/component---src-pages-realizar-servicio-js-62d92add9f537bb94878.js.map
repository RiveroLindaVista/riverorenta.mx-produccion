{"version":3,"file":"component---src-pages-realizar-servicio-js-62d92add9f537bb94878.js","mappings":"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","sources":["webpack://gatsby-starter-default/./src/pages/realizar-servicio.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from \"react\";\r\nimport { Col, Row, Container, Button, Card, Table, Accordion } from \"react-bootstrap\";\r\nimport { navigate } from \"gatsby\";\r\n\r\nimport \"../components/pages-css/sCita.css\";\r\nimport Layout from \"../components/layout.js\";\r\nimport Seo from \"../components/seo\";\r\nimport VideoSeccion from \"../components/videoSeccion.js\";\r\nimport ModalEmergente from \"../components/ModalEmergente.js\";\r\nimport Timer from \"../components/timer.js\";\r\nimport PlaceholderPaquete from \"../components/placeholderPaquete\";\r\nimport api from \"../components/actions/riveroapi.js\";\r\n\r\nexport default function RealizarServicio(){\r\n\r\n    const refForm = useRef();\r\n    const [click, setClick] = useState(false);\r\n    const [error, setError] = useState(0);\r\n    const [modal, setModal] = useState(false);\r\n    const [paquetes, setPaquetes] = useState({paquetes: {}})\r\n    const [ poliza, setPoliza ] = useState();\r\n    const [selected, setSelected] = useState({Clase: \"\", Precio: \"\", Id: \"\"});\r\n    const [mensajeModal, setMensajeModal] = useState(\"\");\r\n\r\n    const minira = [0];\r\n    const mapPlaceholder = minira.map((obj, i) => {\r\n        return(\r\n                <Row>\r\n                    <Col lg={4}>\r\n                        <PlaceholderPaquete/>\r\n                    </Col>\r\n                </Row>\r\n        )\r\n    })\r\n\r\n    useEffect(() => {\r\n        if (typeof window !== 'undefined') {\r\n            //console.log(\"tengo lo siguiente jiji: \", localStorage.getItem(\"RutaNavegacion\"))\r\n\r\n            let modelo = \"\";\r\n            let kilometros = 0;\r\n\r\n            if(localStorage.getItem(\"RutaNavegacion\") === \"sin-cita\"){\r\n                let datos = JSON.parse(localStorage.getItem(\"informacion\"))\r\n                modelo = datos.data.model;\r\n                kilometros = localStorage.getItem(\"Kilo\");\r\n\r\n            } else if (localStorage.getItem(\"RutaNavegacion\") === \"orden-reparacion\") {\r\n                let datos = JSON.parse(localStorage.getItem(\"informacion\"));\r\n                modelo = datos[0].car.model;\r\n                kilometros = localStorage.getItem(\"Kilo\");\r\n            } else if (localStorage.getItem(\"RutaNavegacion\") === \"nuevo-usuario\") {\r\n                let datos = JSON.parse(localStorage.getItem(\"informacion\"));\r\n                //console.log(datos);\r\n                modelo = datos.data.Modelo;\r\n                kilometros = datos.data.Kilometraje;\r\n            }\r\n\r\n            const params = {\r\n                modelo: modelo,\r\n                kilometros: kilometros,\r\n            }\r\n\r\n            //console.log(\"Tengo el kilometraje: \", params);\r\n\r\n            api.getPaquetesDisponible(params).then((resp) => {\r\n                \r\n                const paquetitos = resp.data?.paquetes;\r\n\r\n                if(paquetitos){\r\n                //console.log(\"Entra paquetes aquí\", resp);\r\n                    const sortPaquetes = paquetitos?.sort(function(a, b){return a.total - b.total});\r\n                    setPaquetes({\r\n                        ...paquetes,\r\n                        paquetes: sortPaquetes,\r\n                    });\r\n                } else {\r\n                //console.log(\"No entra paquetes aquí\", resp);\r\n                    setModal(true)\r\n                    setError(14);\r\n                    setMensajeModal(\r\n                        <center>\r\n                            <div>❌ Lo sentimos, no existen paquetes para el modelo: {params.modelo}</div>\r\n                            <p style={{marginBottom: 0}} className=\"texto-gris\">* Favor de contactar con un asesor. </p>\r\n                        </center>\r\n                    )\r\n                }\r\n                setPoliza(resp.data.poliza)\r\n            })\r\n            .catch((error) => {\r\n                //console.log(\"Error: \", error);\r\n            });\r\n\r\n        } else {\r\n            //console.log('we are running on the server');\r\n        }\r\n\r\n    }, []);\r\n\r\n    function continuar(){\r\n        console.log(\"Pulsado\", selected);\r\n    \r\n        if(selected.Clase >= 0) {\r\n            //console.log(\"Valor undefined\")\r\n            setError(13);\r\n            setModal(true);\r\n        } else {\r\n            //console.log(poliza?.clase.length)\r\n            localStorage.setItem(\"paqueteClase\", selected.Clase);\r\n            localStorage.setItem(\"paquetePrecio\", selected.Precio);\r\n            localStorage.setItem(\"paqueteId\", selected.Id);\r\n            \r\n            if(localStorage.getItem(\"RutaNavegacion\") === \"sin-cita\" || \"\"){\r\n                navigate(\"/comentarios-paquetes\");\r\n            } else {\r\n                navigate(\"/resumen-servicios\");\r\n            }\r\n        }\r\n    }\r\n\r\n    return(\r\n        <Layout backUrl={\"/servicio-a-realizar\"} poliza={poliza} setSelected={setSelected} selected={selected}>\r\n            <Seo title=\"Auto servicio\" />\r\n            <Container className=\"container-sin-cita\" onClick={() => {setClick(true)}}>\r\n            {<Timer click={click} setClick={setClick} setError={setError} setModal={setModal}/>}\r\n                <Row className=\"row-cita-arriba\">\r\n                    <div className=\"container-cita\">\r\n                        <Row>\r\n                            <Col className=\"titulo-cita\"><h1 className=\"titulo-h1\">Paquetes disponibles</h1></Col>\r\n                        </Row>\r\n                        <Col lg={12} className=\"titulo-cita\"><p className=\"texto-gris\" style={{marginBottom: 5}}>Seleccione un paquete.</p></Col>\r\n                            <Row style={{height: 620, position: 'relative'}} >\r\n                            {\r\n                                paquetes && paquetes.paquetes && paquetes.paquetes.length > 0 ? (\r\n\r\n                                    paquetes.paquetes.map((obj, index) => {\r\n                                        const subPaquete = obj.incluye;\r\n\r\n                                        return(\r\n                                        <label style={{width: '33%'}} key={index}>\r\n                                            <input class=\"item-check\" name=\"keywords[]\" type=\"radio\" value=\"1\" />\r\n                                            <Col style={{border: '0.5px solid #858796', margin: 5, padding: 5}} className=\"item-name\"\r\n                                                onClick={(e) => {\r\n                                                    //console.log(\"Pulsado jiji\")\r\n                                                    setSelected({\r\n                                                        ...selected,\r\n                                                        Clase: obj.clase,\r\n                                                        Precio: obj.total,\r\n                                                        Id: obj.id\r\n                                                    })}}>\r\n                                                <Col style={{background: 'white', padding: 10, borderRadius: 8}}>\r\n                                                    <div className=\"p-1\" style={{backgroundColor: '#17a2b8', color: 'white'}}>\r\n                                                        <center><h5 style={{marginTop: '0.5rem'}}>{obj.clase}</h5></center>\r\n                                                    </div>\r\n                                                    <div className=\"texto-azul\" style={{marginBottom: 25}}>\r\n                                                        <center><h3 style={{marginTop: '0.5rem'}}>$ {obj.total}</h3></center>\r\n                                                    </div>\r\n                                                    <strong>\r\n                                                        <center>25 PUNTOS DE SEGURIDAD</center>\r\n                                                    </strong>\r\n                                                    <div>\r\n                                                        {subPaquete.map((subObj, subIndex) => (\r\n                                                            <li key={subIndex} className=\"list-group-item fila-incluye\" style={{fontSize: 15, marginBottom: 0, margin: 7, justifyContent: 'flex-start', display: 'flex'}}><img style={{width: 20, height: 20, marginRight: 14, marginLeft: 14}} src={subObj.imagen}/>{subObj.nombre}</li>\r\n                                                        ))}\r\n                                                    </div>\r\n                                                </Col>\r\n                                            </Col>\r\n                                        </label>\r\n                                        )\r\n                                    })\r\n                                ): (\r\n                                    mapPlaceholder\r\n                                )\r\n                            }\r\n                        </Row>\r\n                    </div>\r\n                </Row>\r\n                <Button ref={refForm} onClick={() => continuar()} style={{display: 'none'}}></Button>\r\n                <Row className=\"row-cita-abajo\">\r\n                    <VideoSeccion refForm={refForm} none=\"tiene\"/>\r\n                </Row>\r\n            </Container>\r\n            <ModalEmergente modal={modal} error={error} setModal={setModal} registro={false} setClick={setClick} mensajeModal={mensajeModal}/>\r\n        </Layout>\r\n    )\r\n\r\n}"],"names":["RealizarServicio","refForm","useRef","useState","click","setClick","error","setError","modal","setModal","paquetes","setPaquetes","poliza","setPoliza","Clase","Precio","Id","selected","setSelected","mensajeModal","setMensajeModal","mapPlaceholder","map","obj","i","lg","useEffect","window","modelo","kilometros","localStorage","getItem","JSON","parse","data","model","car","datos","Modelo","Kilometraje","params","api","then","resp","paquetitos","sortPaquetes","sort","a","b","total","style","marginBottom","className","catch","backUrl","title","onClick","height","position","length","index","subPaquete","incluye","width","key","class","name","type","value","border","margin","padding","e","clase","id","background","borderRadius","backgroundColor","color","marginTop","subObj","subIndex","fontSize","justifyContent","display","marginRight","marginLeft","src","imagen","nombre","ref","console","log","setItem","navigate","none","registro"],"sourceRoot":""}